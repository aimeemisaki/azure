# ラボの解決策

ポータルでKey Vaultにアクセスし、_シークレット_ を開きます。クライアントIPにアクセス権がないという警告が表示されます - _ネットワーキング_ タブでそれを追加します（https://ifconfig.me で見つけることができます）。

_シークレット_ ページで `secret01` を開いて _削除_ を選択すると、ソフトデリートが有効になっていることに関するメッセージが表示されます。

_生成/インポート_ をクリックして新しいシークレットを作成します：

- 名前：`secret01`
- シークレットの値：`updated`

> 役に立たない競合についてのエラーが表示されます

代わりにCLIから試してみてください：



```
az keyvault secret set --name secret01 --value azure-labs --vault-name <kv-name>
```


今度はもっと分かりやすいエラーが表示されます：

_シークレット secret01 は現在削除されたが復旧可能な状態にあり、その名前は再利用できません。この状態では、シークレットは復旧または完全削除のみ可能です。_

ポータルに戻って、_シークレット_ タブから _削除されたシークレットの管理_ をクリックします。ここでシークレットを_完全削除_ することができ、これにより完全に削除されます。

> でも、許可がありません！

デフォルトでは誰も完全削除の許可を持っていません。_アクセスポリシー_ であなたのアカウントにそれを追加する必要があります。その後、シークレットを完全削除し、再作成することができます。

新しいシークレットが作成されるとすぐに、VMでそれを読むことができます。
